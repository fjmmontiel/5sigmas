<!-- Unified Roadmap with Series Cards -->
<div class="roadmap-unified">
  <!-- CSS Line Implementation -->
  <div class="roadmap-line">
    <div class="roadmap-rail"></div>
    <div id="rm-progress" class="roadmap-progress"></div>
  </div>

  <!-- Step 1: Fundamentos -->
  <div class="roadmap-step step-1">
    <div class="roadmap-marker">1</div>
    <!-- Card Structure -->
    <a href="series/fundamentos-IA-IAG/00_presentacion_serie/" class="series-card available"
      title="Empezar por: Fundamentos de IA e IA generativa">
      <div class="series-card-inner">
        <div class="series-card-front">
          <div class="icon-wrapper">
            <span class="series-icon">üèõÔ∏è</span>
          </div>
          <h3 class="series-title">Fundamentos de IA e IA generativa</h3>
          <div class="status-pill available">Empieza aqu√≠</div>
        </div>
        <div class="series-card-back">
          <h3 class="series-title-back">Fundamentos de IA e IA generativa</h3>
          <p class="series-long-desc">
            Una serie para construir criterio desde los fundamentos. Qu√© es (y qu√© no es) la IA, c√≥mo aprenden los
            modelos,
            qu√© cambia con la IA generativa, y como ambas tecnolog√≠as se diferencian y complementan en sistemas
            productivos del mundo real.
          </p>
          <span class="cta-link">Ver presentaci√≥n &rarr;</span>
        </div>
      </div>
    </a>
  </div>

  <!-- Step 2: De las cavernas a la AGI -->
  <div class="roadmap-step step-2">
    <div class="roadmap-marker">2</div>
    <a href="series/from-cave-to-AGI/00_presentacion_serie/" class="series-card available"
      title="En construcci√≥n: De las cavernas a la AGI">
      <div class="series-card-inner">
        <div class="series-card-front">
          <div class="icon-wrapper">
            <span class="series-icon">üß†</span>
          </div>
          <h3 class="series-title">De las cavernas a la AGI</h3>
          <div class="status-pill available">En construcci√≥n</div>
        </div>
        <div class="series-card-back">
          <h3 class="series-title-back">De las cavernas a la AGI</h3>
          <p class="series-long-desc">
            Un viaje hist√≥rico para entender cuales han sido las piezas clave que han ido sustentando el avance
            tecnol√≥gico, cient√≠fico y filos√≥fico que nos llevan a los modelos actuales.
          </p>
          <span class="cta-link">En construcci√≥n &rarr;</span>
        </div>
      </div>
    </a>
  </div>

  <!-- Step 3: Multimodalidad en IAG -->
  <div class="roadmap-step step-3">
    <div class="roadmap-marker">3</div>
    <a href="series/multimodalidad-IAG/00_presentacion_serie/" class="series-card locked"
      title="Video, audio, imagen y texto en IA Generativa">
      <div class="series-card-inner">
        <div class="series-card-front">
          <div class="icon-wrapper">
            <span class="series-icon">üéõÔ∏è</span>
          </div>
          <h3 class="series-title">Multimodalidad en IA Generativa</h3>
          <div class="status-pill available">Pr√≥ximamente</div>
        </div>
        <div class="series-card-back">
          <h3 class="series-title-back">Multimodalidad en IA Generativa</h3>
          <p class="series-long-desc">
            Un recorrido por las arquitecturas, mecanismos de entreno y aplicaciones pr√°cticas de los modelos
            multimodales, aquellos que trabajan con m√°s de un tipo de dato (texto, imagen, audio, video).
          </p>
          <span class="cta-link">Pr√≥ximamente &rarr;</span>
        </div>
      </div>
    </a>
  </div>

  <!-- Step 4: Modelos razonadores -->
  <div class="roadmap-step step-4">
    <div class="roadmap-marker">4</div>
    <a href="series/modelos-razonadores-tiempo-fisico/00_presentacion_serie/" class="series-card locked"
      title="Pr√≥ximamente: Modelos razonadores y tiempo f√≠sico">
      <div class="series-card-inner">
        <div class="series-card-front">
          <div class="icon-wrapper">
            <span class="series-icon">‚è±Ô∏è</span>
          </div>
          <h3 class="series-title">Modelos razonadores y tiempo f√≠sico</h3>
          <div class="status-pill available">Pr√≥ximamente</div>
        </div>
        <div class="series-card-back">
          <h3 class="series-title-back">Modelos razonadores y tiempo f√≠sico</h3>
          <p class="series-long-desc">
            Qu√© significa ‚Äúrazonar‚Äù en modelos actuales, qu√© cuesta (latencia, compute, fiabilidad) y qu√© cambia
            cuando el sistema interact√∫a con un entorno con restricciones f√≠sicas.
          </p>
          <span class="cta-link">Pr√≥ximamente &rarr;</span>
        </div>
      </div>
    </a>
  </div>

  <!-- Step 5: Energ√≠a y Felicidad -->
  <div class="roadmap-step step-5">
    <div class="roadmap-marker">5</div>
    <a href="series/IA-PIB-felicidad-energia/00_presentacion_serie/" class="series-card locked"
      title="Pr√≥ximamente: IA, PIB, bienestar y energ√≠a">
      <div class="series-card-inner">
        <div class="series-card-front">
          <div class="icon-wrapper">
            <span class="series-icon">‚ö°</span>
          </div>
          <h3 class="series-title">IA, PIB, bienestar y energ√≠a</h3>
          <div class="status-pill available">Pr√≥ximamente</div>
        </div>
        <div class="series-card-back">
          <h3 class="series-title-back">IA, PIB, bienestar y energ√≠a</h3>
          <p class="series-long-desc">
            Como el PIB se ve afectado por esta nueva tecnolog√≠a, y como se al√≠nea con la relaci√≥n entre consumo
            energ√©tico y bienestar de la poblaci√≥n.
          </p>
          <span class="cta-link">Pr√≥ximamente &rarr;</span>
        </div>
      </div>
    </a>
  </div>

  <!-- Step 6: Datacenters Espaciales -->
  <div class="roadmap-step step-6">
    <div class="roadmap-marker">6</div>
    <a href="series/datacenters-espacio/00_presentacion_serie/" class="series-card locked"
      title="Pr√≥ximamente: Datacenters en el espacio">
      <div class="series-card-inner">
        <div class="series-card-front">
          <div class="icon-wrapper">
            <span class="series-icon">üõ∞Ô∏è</span>
          </div>
          <h3 class="series-title">Datacenters en el espacio</h3>
          <div class="status-pill available">Pr√≥ximamente</div>
        </div>
        <div class="series-card-back">
          <h3 class="series-title-back">Datacenters en el espacio</h3>
          <p class="series-long-desc">
            F√≠sica, costes y beneficios de llevar computaci√≥n fuera de la Tierra.
          </p>
          <span class="cta-link">Pr√≥ximamente &rarr;</span>
        </div>
      </div>
    </a>
  </div>
</div>

<script>
  (function () {
    const container = document.querySelector('.roadmap-unified');
    if (!container) return;

    // Enable animations
    container.classList.add('rm-anim-ready');

    const progressLine = document.getElementById('rm-progress');
    const steps = document.querySelectorAll('.roadmap-step');

    // 1. Scroll Progress Logic
    function updateLine() {
      if (!progressLine) return;
      const rect = container.getBoundingClientRect();
      const viewportHeight = window.innerHeight;

      // Logic: 0% when top of container hits 60% viewport
      // 100% when bottom of container hits 40% viewport

      const startY = viewportHeight * 0.6;
      const end = rect.height;

      // Relative position calculation
      let currentY = startY - rect.top;
      let percentage = currentY / rect.height;

      // Extend range slightly so it looks fully filled when passing sections
      percentage = (percentage + 0.1) * 1.1;
      percentage = Math.max(0, Math.min(1, percentage));

      progressLine.style.height = (percentage * 100) + '%';
    }

    const onScroll = () => requestAnimationFrame(updateLine);
    window.removeEventListener('scroll', onScroll);
    window.addEventListener('scroll', onScroll);
    updateLine();

    // 2. Element Appearance Logic
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('is-visible');
        }
      });
    }, { threshold: 0.25 });

    steps.forEach(s => observer.observe(s));
  })();
</script>
