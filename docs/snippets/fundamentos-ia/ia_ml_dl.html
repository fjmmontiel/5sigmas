<div class="ai-mat ta-demo ta-tabs" data-demo="ia_ml_dl" data-anim-tabs data-default="ia" data-anim-contrast="auto">
  <nav class="ai-nav" data-role="tablist" aria-label="IA -> ML -> DL -> GenAI">
    <button id="tab-ia" type="button" data-role="tab" aria-selected="true" data-tab="ia">IA</button>
    <button id="tab-ml" type="button" data-role="tab" aria-selected="false" data-tab="ml">ML</button>
    <button id="tab-dl" type="button" data-role="tab" aria-selected="false" data-tab="dl">DL</button>
    <button id="tab-gen" type="button" data-role="tab" aria-selected="false" data-tab="gen">GenAI</button>
  </nav>

  <div class="ta-panels">
    <section class="ai-panel" data-panel="ia" aria-labelledby="tab-ia">
      <div class="ai-title">IA</div>
      <div class="ai-sub">
        <div class="ai-sub-h">El paraguas: decidir y planificar</div>
        <div class="ai-sub-d">
          Marco amplio: tÃ©cnicas para que un sistema razone, planifique o decida. Puede usar reglas, bÃºsqueda,
          optimizaciÃ³n o (a veces) aprendizaje. Si el foco es tomar decisiones/planes sin â€œentrenar un modeloâ€, suele ser IA.
        </div>
      </div>

      <div class="ai-row3" aria-label="Entrada, salida y capacidades">
        <div class="ai-card">
          <div class="ai-card-k">Entrada tÃ­pica</div>
          <div class="ai-card-v">
            <div class="ai-lines">
              <div class="ai-line"><span class="b">â€¢</span><span>Objetivo (lo que quieres lograr)</span></div>
              <div class="ai-line"><span class="b">â€¢</span><span>Restricciones (tiempo, coste, reglas)</span></div>
              <div class="ai-line"><span class="b">â€¢</span><span>Estado del entorno (mapa, recursos, condiciones)</span></div>
            </div>
          </div>
        </div>

        <div class="ai-card">
          <div class="ai-card-k">Salida tÃ­pica</div>
          <div class="ai-card-v">
            <div class="ai-lines">
              <div class="ai-line"><span class="b">â€¢</span><span>DecisiÃ³n (quÃ© hacer)</span></div>
              <div class="ai-line"><span class="b">â€¢</span><span>Plan / ruta (pasos ordenados)</span></div>
              <div class="ai-line"><span class="b">â€¢</span><span>AcciÃ³n / polÃ­tica (cÃ³mo actuar en cada caso)</span></div>
            </div>
          </div>
        </div>

        <div class="ai-card">
          <div class="ai-card-k">Capacidades</div>
          <div class="ai-chips">
            <span class="chip n"><span class="x">-</span>Aprende de datos</span>
            <span class="chip n"><span class="x">-</span>Red neuronal</span>
            <span class="chip n" data-k="gen"><span class="x">-</span>Genera contenido</span>
          </div>
        </div>
      </div>

      <div class="ai-ex" aria-label="Ejemplos cotidianos">
        <ul class="ai-grid">
          <li><div class="ex"><div class="ex-t">ğŸ¤– Aspiradora robot: ruta eficiente</div><div class="ex-d">Planifica por dÃ³nde pasar para cubrir la casa evitando obstÃ¡culos.</div></div></li>
          <li><div class="ex"><div class="ex-t">â™Ÿï¸ Sudoku/ajedrez: mejor jugada</div><div class="ex-d">Explora opciones y elige la que maximiza una puntuaciÃ³n.</div></div></li>
          <li><div class="ex"><div class="ex-t">ğŸ—“ï¸ Turnos en una tienda</div><div class="ex-d">Asigna horarios cumpliendo reglas y restricciones.</div></div></li>
          <li><div class="ex"><div class="ex-t">ğŸšš Reparto: ruta con varias paradas</div><div class="ex-d">Optimiza el orden de visita para minimizar tiempo o kilÃ³metros.</div></div></li>
          <li><div class="ex"><div class="ex-t">ğŸ“‹ Soporte por reglas (FAQ)</div><div class="ex-d">Si detecta X, recomienda Y siguiendo un flujo definido.</div></div></li>
          <li><div class="ex"><div class="ex-t">ğŸš¦ SemÃ¡foros coordinados</div><div class="ex-d">Ajusta ciclos con lÃ³gica de control para reducir atascos.</div></div></li>
        </ul>
      </div>
    </section>

    <section class="ai-panel" data-panel="ml" aria-labelledby="tab-ml" hidden>
      <div class="ai-title">ML</div>
      <div class="ai-sub">
        <div class="ai-sub-h">Aprender patrones desde ejemplos</div>
        <div class="ai-sub-d">
          Rama de IA donde el sistema aprende de datos para generalizar a casos nuevos, sin programar reglas para cada situaciÃ³n.
          Si se entrena con histÃ³ricos y luego â€œprediceâ€ en nuevos casos, esto es ML.
        </div>
      </div>

      <div class="ai-row3" aria-label="Entrada, salida y capacidades">
        <div class="ai-card">
          <div class="ai-card-k">Entrada tÃ­pica</div>
          <div class="ai-card-v">
            <div class="ai-lines">
              <div class="ai-line"><span class="b">â€¢</span><span>Ejemplos (X) con variables / features</span></div>
              <div class="ai-line"><span class="b">â€¢</span><span>Etiquetas (y) en supervisado (la respuesta correcta)</span></div>
              <div class="ai-line"><span class="b">â€¢</span><span>Objetivo: pÃ©rdida/mÃ©trica (quÃ© optimiza)</span></div>
            </div>
          </div>
        </div>

        <div class="ai-card">
          <div class="ai-card-k">Salida tÃ­pica</div>
          <div class="ai-card-v">
            <div class="ai-lines">
              <div class="ai-line"><span class="b">â€¢</span><span>Modelo entrenado (patrÃ³n aprendido)</span></div>
              <div class="ai-line"><span class="b">â€¢</span><span>PredicciÃ³n en nuevos casos (clase/valor/prob)</span></div>
              <div class="ai-line"><span class="b">â€¢</span><span>Scores/segmentos (ranking, clusters, anomalÃ­as)</span></div>
            </div>
          </div>
        </div>

        <div class="ai-card">
          <div class="ai-card-k">Capacidades</div>
          <div class="ai-chips">
            <span class="chip y"><span class="x">âœ“</span>Aprende de datos</span>
            <span class="chip n"><span class="x">-</span>Red neuronal</span>
            <span class="chip n" data-k="gen"><span class="x">-</span>Genera contenido</span>
          </div>
        </div>
      </div>

      <div class="ai-ex" aria-label="Ejemplos cotidianos">
        <ul class="ai-grid">
          <li><div class="ex"><div class="ex-t">ğŸ›’ Demanda del sÃºper</div><div class="ex-d">Predice cuÃ¡ntas unidades se venderÃ¡n para ajustar stock.</div></div></li>
          <li><div class="ex"><div class="ex-t">ğŸ’¶ Riesgo de impago</div><div class="ex-d">Estima probabilidad de impago para decidir condiciones.</div></div></li>
          <li><div class="ex"><div class="ex-t">ğŸ•µï¸ Fraude en tarjeta</div><div class="ex-d">Detecta transacciones sospechosas comparando con patrones.</div></div></li>
          <li><div class="ex"><div class="ex-t">ğŸšª Churn (bajas)</div><div class="ex-d">Predice quiÃ©n podrÃ­a cancelar una suscripciÃ³n.</div></div></li>
          <li><div class="ex"><div class="ex-t">ğŸ‘¥ Segmentos de clientes</div><div class="ex-d">Agrupa perfiles similares para ofertas mÃ¡s relevantes.</div></div></li>
          <li><div class="ex"><div class="ex-t">ğŸ¯ RecomendaciÃ³n de productos</div><div class="ex-d">Sugiere artÃ­culos segÃºn comportamientos parecidos entre usuarios.</div></div></li>
        </ul>
      </div>
    </section>

    <section class="ai-panel" data-panel="dl" aria-labelledby="tab-dl" hidden>
      <div class="ai-title">DL</div>
      <div class="ai-sub">
        <div class="ai-sub-h">ML con redes neuronales profundas</div>
        <div class="ai-sub-d">
          Subconjunto de ML basado en redes profundas, especialmente Ãºtil para imagen, audio y lenguaje (datos complejos).
          Si hay redes profundas para percepciÃ³n (imagen/audio/texto), es DL.
        </div>
      </div>

      <div class="ai-row3" aria-label="Entrada, salida y capacidades">
        <div class="ai-card">
          <div class="ai-card-k">Entrada tÃ­pica</div>
          <div class="ai-card-v">
            <div class="ai-lines">
              <div class="ai-line"><span class="b">â€¢</span><span>SeÃ±ales complejas: imagen, audio o texto</span></div>
              <div class="ai-line"><span class="b">â€¢</span><span>Secuencias/contexto (tokens, frames)</span></div>
              <div class="ai-line"><span class="b">â€¢</span><span>SeÃ±al de aprendizaje: etiquetas o auto-supervisiÃ³n</span></div>
            </div>
          </div>
        </div>

        <div class="ai-card">
          <div class="ai-card-k">Salida tÃ­pica</div>
          <div class="ai-card-v">
            <div class="ai-lines">
              <div class="ai-line"><span class="b">â€¢</span><span>Reconocimiento / detecciÃ³n (quÃ© hay y dÃ³nde)</span></div>
              <div class="ai-line"><span class="b">â€¢</span><span>Representaciones (embeddings) reutilizables</span></div>
              <div class="ai-line"><span class="b">â€¢</span><span>SeÃ±ales para otras tareas (bÃºsqueda, ranking)</span></div>
            </div>
          </div>
        </div>

        <div class="ai-card">
          <div class="ai-card-k">Capacidades</div>
          <div class="ai-chips">
            <span class="chip y"><span class="x">âœ“</span>Aprende de datos</span>
            <span class="chip y"><span class="x">âœ“</span>Red neuronal</span>
            <span class="chip n" data-k="gen"><span class="x">-</span>Genera contenido</span>
          </div>
        </div>
      </div>

      <div class="ai-ex" aria-label="Ejemplos cotidianos">
        <ul class="ai-grid">
          <li><div class="ex"><div class="ex-t">ğŸ”“ Desbloqueo por cara</div><div class="ex-d">Reconoce un rostro comparÃ¡ndolo con una representaciÃ³n aprendida.</div></div></li>
          <li><div class="ex"><div class="ex-t">ğŸ™ï¸ Transcribir notas de voz</div><div class="ex-d">Convierte audio en texto aprendiendo patrones acÃºsticos.</div></div></li>
          <li><div class="ex"><div class="ex-t">ğŸ”¤ Leer texto en fotos (OCR)</div><div class="ex-d">Detecta y reconoce letras en imÃ¡genes.</div></div></li>
          <li><div class="ex"><div class="ex-t">ğŸ‘ï¸ DetecciÃ³n de objetos</div><div class="ex-d">Identifica y localiza coches, personas, seÃ±ales.</div></div></li>
          <li><div class="ex"><div class="ex-t">ğŸŒ™ğŸ“· Modo noche en cÃ¡mara</div><div class="ex-d">Reduce ruido y recupera detalle combinando informaciÃ³n.</div></div></li>
          <li><div class="ex"><div class="ex-t">ğŸ–¼ï¸ Fotos similares en galerÃ­a</div><div class="ex-d">Encuentra imÃ¡genes parecidas comparando embeddings visuales.</div></div></li>
        </ul>
      </div>
    </section>

    <section class="ai-panel" data-panel="gen" aria-labelledby="tab-gen" hidden>
      <div class="ai-title">GenAI</div>
      <div class="ai-sub">
        <div class="ai-sub-h">DL que genera contenido</div>
        <div class="ai-sub-d">
          Subconjunto (habitual) de DL orientado a crear contenido nuevo: texto, imagen, audio o cÃ³digo, condicionado por un objetivo y contexto.
          Si el output es contenido nuevo (no solo una predicciÃ³n), estÃ¡s en GenAI.
        </div>
      </div>

      <div class="ai-row3" aria-label="Entrada, salida y capacidades">
        <div class="ai-card">
          <div class="ai-card-k">Entrada tÃ­pica</div>
          <div class="ai-card-v">
            <div class="ai-lines">
              <div class="ai-line"><span class="b">â€¢</span><span>Prompt (instrucciÃ³n) + objetivo</span></div>
              <div class="ai-line"><span class="b">â€¢</span><span>Contexto (conversaciÃ³n, documentos, ejemplos)</span></div>
              <div class="ai-line"><span class="b">â€¢</span><span>Restricciones/condicionamiento (formato, tono, herramientas)</span></div>
            </div>
          </div>
        </div>

        <div class="ai-card">
          <div class="ai-card-k">Salida tÃ­pica</div>
          <div class="ai-card-v">
            <div class="ai-lines">
              <div class="ai-line"><span class="b">â€¢</span><span>Contenido nuevo (texto, imagen, audio, cÃ³digo)</span></div>
              <div class="ai-line"><span class="b">â€¢</span><span>Variantes / ideas / borradores listos</span></div>
              <div class="ai-line"><span class="b">â€¢</span><span>Respuestas estructuradas (segÃºn el formato pedido)</span></div>
            </div>
          </div>
        </div>

        <div class="ai-card">
          <div class="ai-card-k">Capacidades</div>
          <div class="ai-chips">
            <span class="chip y"><span class="x">âœ“</span>Aprende de datos</span>
            <span class="chip y"><span class="x">âœ“</span>Red neuronal</span>
            <span class="chip y" data-k="gen"><span class="x">âœ“</span>Genera contenido</span>
          </div>
        </div>
      </div>

      <div class="ai-ex" aria-label="Ejemplos cotidianos">
        <ul class="ai-grid">
          <li><div class="ex"><div class="ex-t">âœ‰ï¸ Redactar un email</div><div class="ex-d">Genera un borrador con objetivo y tono especificados.</div></div></li>
          <li><div class="ex"><div class="ex-t">ğŸ“ Resumir un documento</div><div class="ex-d">Condensa puntos clave en un texto breve y estructurado.</div></div></li>
          <li><div class="ex"><div class="ex-t">ğŸ›ï¸ Reescribir con otro tono</div><div class="ex-d">Ajusta estilo: mÃ¡s formal, mÃ¡s breve o mÃ¡s persuasivo.</div></div></li>
          <li><div class="ex"><div class="ex-t">ğŸ–¼ï¸âœ¨ Crear una imagen</div><div class="ex-d">Genera una imagen coherente a partir de una descripciÃ³n.</div></div></li>
          <li><div class="ex"><div class="ex-t">ğŸ’» Asistente de cÃ³digo</div><div class="ex-d">Propone funciones, corrige errores y sugiere refactors.</div></div></li>
          <li><div class="ex"><div class="ex-t">ğŸ¤ Guion para una presentaciÃ³n</div><div class="ex-d">Produce un esquema y notas del ponente a partir del tema.</div></div></li>
        </ul>
      </div>
    </section>
  </div>
</div>

<style>
  .ai-mat,
  .ai-mat * { box-sizing: border-box; }

  .ai-mat {
    --bg: var(--md-default-bg-color, #fff);
    --fg: var(--md-default-fg-color, #0f172a);
    --a: var(--md-primary-fg-color, #26A69A);
    --g: var(--md-accent-fg-color, #FFB343);
    --ta-brand-font: "Avenir Next", "Avenir", "Segoe UI", "Helvetica Neue", Arial, sans-serif;
    --bd: rgba(15, 23, 42, .22);
    --mut: rgba(15, 23, 42, .72);
    --p: clamp(12px, 1.0vw, 15px);
    --gap: clamp(10px, 1.0vw, 14px);

    display: block;
    max-width: 1040px;
    margin: 0 auto;
    padding: var(--p);
    padding-bottom: calc(var(--p) + 46px);

    border: 1px solid var(--bd);
    border-radius: 20px;
    overflow: hidden;
    isolation: isolate;

    background:
      radial-gradient(140% 140% at 12% 12%, rgba(38, 166, 154, .10), transparent 62%),
      radial-gradient(140% 140% at 88% 16%, rgba(255, 179, 67, .09), transparent 66%),
      linear-gradient(180deg, rgba(0, 0, 0, .04), rgba(255, 255, 255, .07));

    color: var(--fg);
    font-family: var(--ta-brand-font);

    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  [data-md-color-scheme="slate"] .ai-mat {
    --bg: var(--md-default-bg-color, #0f172a);
    --fg: var(--md-default-fg-color, #e2e8f0);
    --bd: rgba(226, 232, 240, .22);
    --mut: rgba(226, 232, 240, .76);

    background:
      radial-gradient(140% 140% at 12% 12%, rgba(38, 166, 154, .14), transparent 62%),
      radial-gradient(140% 140% at 88% 16%, rgba(255, 179, 67, .12), transparent 66%),
      linear-gradient(180deg, rgba(255, 255, 255, .04), rgba(17, 24, 39, .44));
  }

  /* Footer watermark */
  .ta-demo { position: relative; }
  .ta-demo::before {
    content: "5SIGMAS Â· Animation Library";
    position: absolute;
    left: 12px;
    right: 138px;
    bottom: 12px;
    padding-top: 6px;
    border-top: 1px solid rgba(15, 23, 42, .16);
    color: rgba(15, 23, 42, .62);
    font-size: 10px;
    font-weight: 700;
    letter-spacing: .08em;
    text-transform: uppercase;
    line-height: 1.2;
    pointer-events: none;
    z-index: 0;
  }

  .ta-demo::after {
    content: "";
    position: absolute;
    right: 12px;
    bottom: 10px;
    width: 120px;
    height: 30px;
    background: url("/assets/logo.svg") no-repeat center / contain;
    opacity: 0.08;
    pointer-events: none;
    z-index: 0;
  }

  .ta-demo > * { position: relative; z-index: 1; }

  [data-md-color-scheme="slate"] .ta-demo::before {
    border-top-color: rgba(226, 232, 240, .24);
    color: rgba(226, 232, 240, .72);
  }

  [data-md-color-scheme="slate"] .ta-demo::after {
    background-image: url("/assets/logo_white.svg");
    opacity: 0.10;
  }

  /* Tabs */
  .ai-nav {
    --flow-w: 0px;
    --flow-accent: rgb(50, 74, 178);

    position: relative;
    display: grid;
    grid-template-columns: repeat(4, minmax(0, 1fr));
    gap: 10px;
    margin: 2px 2px 12px;
    overflow: hidden;
    border-radius: 16px;
  }

  .ai-nav::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: 16px;
    background: rgba(255, 255, 255, .02);
    pointer-events: none;
    z-index: 0;
  }

  .ai-nav::after {
    content: "";
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: var(--flow-w);
    border-radius: 16px;
    background:
      linear-gradient(90deg,
        color-mix(in srgb, var(--flow-accent) 18%, transparent),
        color-mix(in srgb, var(--flow-accent) 10%, transparent));
    border: 1px solid color-mix(in srgb, var(--flow-accent) 26%, transparent);
    clip-path: polygon(0 0, calc(100% - 18px) 0, 100% 50%, calc(100% - 18px) 100%, 0 100%);
    pointer-events: none;
    z-index: 0;
    transition: width .18s ease;
  }

  .ai-nav button {
    position: relative;
    z-index: 1;
    appearance: none;
    -webkit-appearance: none;
    font: inherit;
    cursor: pointer;
    user-select: none;
    touch-action: manipulation;

    border: 1px solid var(--bd);
    border-radius: 14px;
    background: rgba(255, 255, 255, .04);
    padding: 12px 10px;

    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 0;

    font-weight: 950;
    letter-spacing: .01em;
    color: var(--fg);

    transition: transform .14s ease, box-shadow .14s ease, border-color .14s ease, background-color .14s ease;
  }

  .ai-nav button:hover {
    transform: translateY(-1px);
    box-shadow: 0 10px 22px rgba(0, 0, 0, .10);
  }

  .ai-nav button:focus-visible {
    outline: none;
    box-shadow: inset 0 0 0 3px rgba(50, 74, 178, .24);
  }

  .ai-nav button.on,
  .ai-nav button[aria-selected="true"] {
    background: rgba(50, 74, 178, .14);
    border-color: rgba(50, 74, 178, .55);
  }

  .ai-nav button.is-in:not(.on) {
    background: color-mix(in srgb, var(--flow-accent) 9%, rgba(255, 255, 255, .04));
    border-color: color-mix(in srgb, var(--flow-accent) 28%, var(--bd));
    box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--flow-accent) 16%, transparent);
  }

  .ai-nav button[data-tab="gen"].on,
  .ai-nav button[data-tab="gen"][aria-selected="true"] {
    background: color-mix(in srgb, var(--g) 18%, transparent);
    border-color: color-mix(in srgb, var(--g) 46%, transparent);
  }

  .ta-panels {
    border-top: 1px dashed color-mix(in srgb, var(--g) 35%, transparent);
    padding-top: 12px;
  }

  /* Panel */
  .ai-panel {
    padding: var(--gap);
    display: flex;
    flex-direction: column;
    gap: 12px;
    min-width: 0;
    background: rgba(255, 255, 255, .02);
    border-radius: 16px;
  }

  .ai-panel[hidden] { display: none !important; }

  .ai-title {
    font-size: clamp(20px, 2.0vw, 28px);
    font-weight: 950;
    margin: 0;
  }

  .ai-sub { display: grid; gap: 6px; }

  .ai-sub-h {
    font-size: clamp(14.5px, 1.25vw, 16px);
    font-weight: 900;
    color: var(--mut);
    line-height: 1.25;
  }

  .ai-sub-d {
    font-size: 14px;
    line-height: 1.45;
    color: var(--fg);
    max-width: 72ch;
  }

  /* Cards + row3 */
  .ai-card {
    border: 1px solid var(--bd);
    border-radius: 14px;
    padding: 12px;
    background: rgba(255, 255, 255, .04);
  }

  .ai-card-k {
    font-size: 11px;
    letter-spacing: .09em;
    text-transform: uppercase;
    color: var(--mut);
    margin-bottom: 6px;
    font-weight: 900;
  }

  .ai-card-v { font-size: 14px; line-height: 1.5; }

  .ai-row3 {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 10px;
  }

  /* Enriched IO list */
  .ai-lines { display: grid; gap: 6px; }

  .ai-line {
    display: flex;
    gap: 8px;
    align-items: flex-start;
  }

  .ai-line .b {
    color: var(--mut);
    font-weight: 950;
    line-height: 1.2;
  }

  /* Chips */
  .ai-chips {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }

  .chip {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    border: 1px solid var(--bd);
    border-radius: 999px;
    padding: 7px 10px;
    background: rgba(255, 255, 255, .03);
    font-weight: 900;
    font-size: 13px;
  }

  .chip .x {
    width: 22px;
    height: 18px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 999px;
    border: 1px solid var(--bd);
    background: rgba(255, 255, 255, .02);
    font-weight: 950;
  }

  .chip.y .x { background: color-mix(in srgb, var(--a) 20%, transparent); }

  .chip.y[data-k="gen"] .x { background: color-mix(in srgb, var(--g) 22%, transparent); }

  .chip.n { opacity: .60; }

  /* Examples */
  .ai-ex {
    border: 1px solid var(--bd);
    border-radius: 14px;
    padding: 10px;
    background: rgba(255, 255, 255, .04);
  }

  .ai-grid {
    list-style: none !important;
    padding: 0 !important;
    margin: 0 !important;

    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 8px;
  }

  .ai-grid > li {
    padding: 0;
    border: 0;
    background: transparent;
  }

  .ai-grid > li::before { content: none !important; }

  .ex {
    border: 1px solid var(--bd);
    border-radius: 12px;
    background: rgba(255, 255, 255, .03);
    padding: 8px 10px;
    display: flex;
    flex-direction: column;
    gap: 4px;
  }

  .ex-t {
    font-weight: 950;
    font-size: 13.8px;
    line-height: 1.2;
  }

  .ex-d {
    color: var(--mut);
    font-size: 12.9px;
    line-height: 1.35;
  }

  @media (max-width: 980px) {
    .ai-row3 { grid-template-columns: 1fr; }
  }

  @media (max-width: 440px) {
    .ai-nav { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    .ai-nav::after { display: none; }
  }

  @media (prefers-reduced-motion: reduce) {
    .ai-nav button { transition: none !important; }
    .ai-nav button:hover { transform: none !important; }
  }
</style>

<script>
  (function () {
    function initRoot(root) {
      if (!root || root.dataset.tabsInit === '1') return;
      root.dataset.tabsInit = '1';

      const tablist = root.querySelector('[data-role="tablist"]');
      const tabs = Array.from(root.querySelectorAll('[data-role="tab"][data-tab]'));
      const panels = Array.from(root.querySelectorAll('.ai-panel[data-panel]'));

      if (!tablist || tabs.length === 0 || panels.length === 0) return;

      let currentId = null;
      let currentIndex = 0;
      let raf = 0;

      function applyFlow() {
        const t = tabs[currentIndex];
        if (!t) return;
        const right = t.offsetLeft + t.offsetWidth;
        const pad = 10;
        const w = Math.min(tablist.clientWidth, right + pad);
        tablist.style.setProperty('--flow-w', w + 'px');
        tablist.style.setProperty('--flow-accent', currentId === 'gen' ? 'var(--g)' : 'rgb(50, 74, 178)');
      }

      function scheduleFlow() {
        if (raf) cancelAnimationFrame(raf);
        raf = requestAnimationFrame(applyFlow);
      }

      if ('ResizeObserver' in window) {
        const ro = new ResizeObserver(() => scheduleFlow());
        ro.observe(tablist);
      } else {
        window.addEventListener('resize', scheduleFlow, { passive: true });
      }

      function setActive(id, focusTab) {
        currentId = id;
        currentIndex = Math.max(0, tabs.findIndex((x) => x.getAttribute('data-tab') === id));

        tabs.forEach((t, i) => {
          const on = t.getAttribute('data-tab') === id;
          const isIn = i <= currentIndex;
          t.classList.toggle('on', on);
          t.classList.toggle('is-in', isIn);
          t.setAttribute('aria-selected', on ? 'true' : 'false');
          t.tabIndex = on ? 0 : -1;
        });

        scheduleFlow();

        panels.forEach((p) => {
          const on = p.getAttribute('data-panel') === id;
          if (on) p.removeAttribute('hidden');
          else p.setAttribute('hidden', '');
        });

        if (focusTab) {
          const t = tabs.find((x) => x.getAttribute('data-tab') === id);
          if (t) t.focus();
        }
      }

      const initial = root.getAttribute('data-default') || (tabs[0] && tabs[0].getAttribute('data-tab'));
      if (initial) setActive(initial, false);

      tablist.addEventListener('click', (e) => {
        const btn = e.target && e.target.closest && e.target.closest('[data-role="tab"][data-tab]');
        if (!btn || !tablist.contains(btn)) return;
        setActive(btn.getAttribute('data-tab'), false);
      });

      tablist.addEventListener('keydown', (e) => {
        const btn = e.target && e.target.closest && e.target.closest('[data-role="tab"][data-tab]');
        if (!btn || !tablist.contains(btn)) return;

        const k = e.key;
        if (!['ArrowLeft', 'ArrowRight', 'Home', 'End'].includes(k)) return;
        e.preventDefault();

        const cur = tabs.indexOf(btn);
        if (cur < 0) return;

        let next = cur;
        if (k === 'ArrowLeft') next = (cur - 1 + tabs.length) % tabs.length;
        if (k === 'ArrowRight') next = (cur + 1) % tabs.length;
        if (k === 'Home') next = 0;
        if (k === 'End') next = tabs.length - 1;

        const id = tabs[next] && tabs[next].getAttribute('data-tab');
        if (id) setActive(id, true);
      });
    }

    function boot() {
      document.querySelectorAll('[data-anim-tabs][data-demo="ia_ml_dl"]').forEach(initRoot);
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', boot, { once: true });
    } else {
      boot();
    }

    // MkDocs Material instant navigation
    if (window.document$ && typeof window.document$.subscribe === 'function') {
      window.document$.subscribe(() => boot());
    }
  })();
</script>
